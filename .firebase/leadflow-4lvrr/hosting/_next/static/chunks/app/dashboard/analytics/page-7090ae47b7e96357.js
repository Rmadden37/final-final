(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[754],{4642:(e,t,r)=>{Promise.resolve().then(r.bind(r,10808))},10808:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(95155);function l(){return(0,a.jsx)("div",{children:"Analytics Content"})}var s=r(98030),n=r(66695),i=r(80659);function o(){let{user:e}=(0,s.A)();return e?"setter"===e.role?(0,a.jsx)("div",{className:"container mx-auto py-8",children:(0,a.jsx)(n.Zp,{children:(0,a.jsx)(n.Wu,{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(i.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Analytics Not Available"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Analytics are available for closers and managers only."})]})})})}):(0,a.jsxs)("div",{className:"container mx-auto py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold font-headline flex items-center",children:[(0,a.jsx)(i.A,{className:"mr-3 h-8 w-8 text-primary"}),"Team Analytics"]}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Comprehensive insights into your team's performance and lead history."})]}),(0,a.jsx)(l,{})]}):null}},56104:(e,t,r)=>{"use strict";r.d(t,{EF:()=>g,IG:()=>c,V$:()=>x,db:()=>u,j2:()=>d,yA:()=>o});var a=r(23915),l=r(93004),s=r(35317),n=r(90858),i=r(81427);let o=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyBc3jmFE6dRXBApmWD9Jg2PO86suqGgaZw",authDomain:"leadflow-4lvrr.firebaseapp.com",projectId:"leadflow-4lvrr",storageBucket:"leadflow-4lvrr.firebasestorage.app",messagingSenderId:"13877630896",appId:"1:13877630896:web:ab7d2717024960ec36e875",measurementId:"G-KDEF2C21SH"}),d=(0,l.xI)(o),u=(0,s.aU)(o),c=(0,n.c7)(o),m=(0,i.Uz)(o),g=(0,i.Qg)(m,"acceptJob"),x=(0,i.Qg)(m,"inviteUser");(0,i.Qg)(m,"updateAdminRoles"),(0,i.Qg)(m,"getTeamStats"),(0,i.Qg)(m,"getDetailedAnalytics"),(0,i.Qg)(m,"generateAnalyticsReport")},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(52596),l=r(39688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.QP)((0,a.$)(t))}},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>u,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>c});var a=r(95155),l=r(12115),s=r(59434);let n=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)("div",{ref:t,"data-card":"true",className:(0,s.cn)("rounded-2xl overflow-hidden border border-slate-200 bg-white text-card-foreground","shadow-lg shadow-slate-200/50 hover:shadow-xl hover:shadow-slate-300/50","transition-all duration-200 ease-in-out","mobile:rounded-xl mobile:mx-2 mobile:shadow-md","mobile:border-slate-300/50",r),...l})});n.displayName="Card";let i=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6","mobile:p-4 mobile:space-y-1",r),...l})});i.displayName="CardHeader";let o=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("text-3xl font-bold font-headline leading-tight tracking-tight text-center","mobile:text-xl mobile:leading-snug","tablet:text-2xl",r),...l})});o.displayName="CardTitle";let d=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground text-center","mobile:text-xs mobile:leading-relaxed",r),...l})});d.displayName="CardDescription";let u=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...l})});u.displayName="CardContent";let c=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...l})});c.displayName="CardFooter"},80659:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},98030:(e,t,r)=>{"use strict";r.d(t,{A:()=>m,AuthProvider:()=>c});var a=r(95155),l=r(93004),s=r(35317),n=r(35695),i=r(12115),o=r(56104),d=r(50172);let u=(0,i.createContext)(void 0),c=e=>{let{children:t}=e,[r,c]=(0,i.useState)(null),[m,g]=(0,i.useState)(null),[x,f]=(0,i.useState)(!0),[p,h]=(0,i.useState)(!1),v=(0,n.useRouter)(),N=(0,n.usePathname)(),b=(0,i.useRef)({isNavigating:!1});(0,i.useEffect)(()=>{console.log("\uD83D\uDD25 Setting up Firebase auth listener");let e=(0,l.hg)(o.j2,async e=>{if(console.log("\uD83D\uDD25 Firebase auth state changed:",!!e,"uid:",null==e?void 0:e.uid),(null==r?void 0:r.uid)===(null==e?void 0:e.uid)&&p)return void console.log("\uD83D\uDD04 Same user, skipping update");c(e),h(!0),!e&&(g(null),f(!1),"/login"===N||b.current.isNavigating||(b.current.isNavigating=!0,console.log("\uD83D\uDEAA Redirecting to login"),v.replace("/login"),setTimeout(()=>{b.current.isNavigating=!1},1e3)))});return()=>{console.log("\uD83D\uDD25 Cleaning up Firebase auth listener"),e()}},[]),(0,i.useEffect)(()=>{let e;if(r&&p){console.log("\uD83D\uDC64 Setting up user document listener for:",r.uid);let t=(0,s.doc)(o.db,"users",r.uid);e=(0,s.aQ)(t,async e=>{if(console.log("\uD83D\uDCC4 User document snapshot received, exists:",e.exists()),e.exists()){let t={uid:r.uid,...e.data()};g(t),f(!1),console.log("✅ User data loaded:",t.email,t.role),"/login"!==N||b.current.isNavigating||(b.current.isNavigating=!0,console.log("\uD83C\uDFE0 Redirecting to dashboard"),v.replace("/dashboard"),setTimeout(()=>{b.current.isNavigating=!1},1e3))}else{console.log("\uD83D\uDCDD Creating default user document");let e={uid:r.uid,email:r.email||"",displayName:r.displayName||"",role:"setter",teamId:"default",avatarUrl:r.photoURL||null,phoneNumber:r.phoneNumber||null,status:"On Duty",createdAt:new Date().toISOString()};try{await (0,s.setDoc)(t,e),g(e),f(!1),console.log("✅ Default user document created")}catch(e){console.error("❌ Failed to create user document:",e),g(null),f(!1)}}},e=>{console.error("❌ User document listener error:",e),g(null),f(!1)})}else!r&&p&&(g(null),f(!1));return()=>{e&&(console.log("\uD83E\uDDF9 Cleaning up user document listener"),e())}},[r,p,N,v]);let y=async()=>{console.log("\uD83D\uDC4B Logging out"),b.current.isNavigating=!0,f(!0);try{await (0,l.CI)(o.j2),g(null),c(null),v.replace("/login")}catch(e){console.error("❌ Logout error:",e)}finally{f(!1),setTimeout(()=>{b.current.isNavigating=!1},1e3)}};if(x&&!p)return(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(d.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})});let j={firebaseUser:r,user:m,loading:x,teamId:(null==m?void 0:m.teamId)||null,role:(null==m?void 0:m.role)||null,logout:y};return(0,a.jsx)(u.Provider,{value:j,children:t})},m=()=>{let e=(0,i.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,4763,4277,8441,1684,7358],()=>t(4642)),_N_E=e.O()}]);