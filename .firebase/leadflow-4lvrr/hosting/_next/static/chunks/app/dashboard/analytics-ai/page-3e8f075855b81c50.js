(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7915],{9991:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>y});var t=r(95155),s=r(12115),l=r(66695),o=r(36936),d=r(54913),i=r(45554),n=r(74601),c=r(30285),m=r(54165),u=r(62523),x=r(66424),h=r(87481),b=r(98030),g=r(5263),f=r(91721),p=r(50172),j=r(73672),N=r(59434);function k(e){let{chart:a}=e;return a?(0,t.jsxs)("div",{className:"mt-3 p-3 bg-white/10 dark:bg-slate-900/30 rounded-lg border border-amber-200/50 dark:border-turquoise/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(g.A,{className:"h-4 w-4 text-amber-600 dark:text-turquoise"}),(0,t.jsx)("span",{className:"text-xs font-medium text-amber-700 dark:text-turquoise",children:"Chart Data"})]}),(0,t.jsxs)("div",{className:"text-xs text-amber-600 dark:text-gray-300",children:[(0,t.jsxs)("div",{className:"font-medium mb-1",children:["Labels: ",a.data.labels.join(", ")]}),a.data.datasets.map((e,a)=>(0,t.jsxs)("div",{className:"mb-1",children:[(0,t.jsxs)("span",{className:"font-medium",children:[e.label,":"]})," ",e.data.join(", ")]},a))]})]}):null}function w(e){let{isOpen:a,onClose:r}=e,[l,i]=(0,s.useState)([]),[n,g]=(0,s.useState)(""),[w,y]=(0,s.useState)(!1),[v,q]=(0,s.useState)(null),{user:A}=(0,b.A)(),{toast:R}=(0,h.dj)(),C=(0,s.useRef)(null),S=(0,s.useRef)(null);(0,s.useEffect)(()=>{a&&0===l.length&&A&&i([{id:"welcome",content:"Greetings, ".concat(A.displayName||"mortal","! ☀️ I am Ra, the Sun God and guardian of your LeadFlow realm. My divine wisdom shall guide you through sales analytics, illuminate performance insights, and navigate the sacred paths of your data. What knowledge do you seek from the eternal light?"),isBot:!0,timestamp:new Date}])},[a,A,l.length]),(0,s.useEffect)(()=>{C.current&&(C.current.scrollTop=C.current.scrollHeight)},[l]),(0,s.useEffect)(()=>{a&&S.current&&S.current.focus()},[a]);let B=async()=>{if(console.log("\uD83E\uDD16 SendMessage called",{input:n.trim(),user:A,isLoading:w}),!n.trim()||w)return;console.log("\uD83D\uDE80 Sending message to chatbot API...");let e={id:Date.now().toString(),content:n.trim(),isBot:!1,timestamp:new Date};i(a=>[...a,e]),g(""),y(!0);try{let a=await fetch("/api/chatbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userMessage:e.content,context:{userRole:((null==A?void 0:A.role)==="admin"?"manager":null==A?void 0:A.role)||"closer",teamId:(null==A?void 0:A.teamId)||"default"}})});if(console.log("\uD83D\uDCE1 API Response status:",a.status),!a.ok)throw Error("Failed to get response from chatbot");let r=await a.json();console.log("✅ API Response data:",r);let t={id:(Date.now()+1).toString(),content:r.text||"I apologize, but I could not process your request.",isBot:!0,timestamp:new Date,chart:r.chart||null};i(e=>[...e,t]),v||q("gemini_".concat(Date.now()))}catch(a){console.error("Chatbot error:",a),R({title:"Bot Error",description:"Failed to get response from LeadFlow Assistant. Please try again.",variant:"destructive"});let e={id:(Date.now()+1).toString(),content:"The divine light flickers momentarily... Even gods must rest. Please seek my wisdom again shortly, mortal.",isBot:!0,timestamp:new Date};i(a=>[...a,e])}finally{y(!1)}};return(0,t.jsx)(m.lG,{open:a,onOpenChange:r,children:(0,t.jsxs)(m.Cf,{className:"sm:max-w-[700px] h-[700px] flex flex-col p-0 bg-gradient-to-b from-amber-50 to-orange-50 dark:from-slate-900 dark:to-slate-800 border-2 border-amber-200 dark:border-turquoise/30 dark:card-glass dark:glow-turquoise",children:[(0,t.jsx)(m.c7,{className:"px-6 py-4 border-b border-amber-200 dark:border-turquoise/20 bg-gradient-to-r from-amber-100 to-orange-100 dark:from-slate-800/50 dark:to-slate-700/50",children:(0,t.jsxs)(m.L3,{className:"flex items-center gap-2 text-amber-900 dark:text-turquoise",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.A,{className:"h-6 w-6 text-amber-600 dark:text-turquoise animate-pulse"}),(0,t.jsx)(d.A,{className:"h-3 w-3 text-amber-700 dark:text-cyan absolute -top-1 -right-1"})]}),"Ra - Sales Analytics Oracle"]})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,t.jsx)(x.F,{className:"flex-1 px-6",ref:C,children:(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[l.map(e=>(0,t.jsxs)("div",{className:(0,N.cn)("flex gap-3",e.isBot?"justify-start":"justify-end"),children:[e.isBot&&(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-amber-200 to-orange-300 dark:from-turquoise/20 dark:to-cyan/30 flex items-center justify-center flex-shrink-0 border-2 border-amber-300 dark:border-turquoise/50 shadow-lg dark:glow-turquoise",children:(0,t.jsx)(o.A,{className:"h-4 w-4 text-amber-700 dark:text-turquoise"})}),(0,t.jsxs)("div",{className:(0,N.cn)("max-w-[75%] rounded-lg px-3 py-2 text-sm",e.isBot?"bg-gradient-to-br from-amber-100 to-orange-100 dark:from-slate-800/70 dark:to-slate-700/70 text-amber-900 dark:text-gray-200 border border-amber-200 dark:border-turquoise/20 shadow-md dark:glow-turquoise":"bg-gradient-to-br from-blue-500 to-blue-600 dark:from-cyan/80 dark:to-turquoise/80 text-white dark:text-slate-900 shadow-md dark:glow-cyan"),children:[(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}),e.chart&&(0,t.jsx)(k,{chart:e.chart}),(0,t.jsx)("div",{className:(0,N.cn)("text-xs mt-1 opacity-70",e.isBot?"text-amber-600 dark:text-gray-400":"text-blue-100 dark:text-slate-700"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),!e.isBot&&(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-600 dark:bg-cyan/80 flex items-center justify-center flex-shrink-0 dark:glow-cyan",children:(0,t.jsx)(f.A,{className:"h-4 w-4 text-white dark:text-slate-900"})})]},e.id)),w&&(0,t.jsxs)("div",{className:"flex gap-3 justify-start",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-amber-200 to-orange-300 dark:from-turquoise/20 dark:to-cyan/30 flex items-center justify-center flex-shrink-0 border-2 border-amber-300 dark:border-turquoise/50 shadow-lg dark:glow-turquoise",children:(0,t.jsx)(o.A,{className:"h-4 w-4 text-amber-700 dark:text-turquoise animate-pulse"})}),(0,t.jsx)("div",{className:"bg-gradient-to-br from-amber-100 to-orange-100 dark:from-slate-800/70 dark:to-slate-700/70 rounded-lg px-3 py-2 border border-amber-200 dark:border-turquoise/20 dark:glow-turquoise",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-amber-800 dark:text-gray-300",children:[(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)("span",{className:"text-xs italic",children:"Ra analyzes the cosmic data..."})]})})]})]})}),(0,t.jsxs)("div",{className:"border-t border-amber-200 dark:border-turquoise/20 px-6 py-4 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-slate-800/50 dark:to-slate-700/50",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(u.p,{ref:S,value:n,onChange:e=>g(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),B())},placeholder:"Ask about sales data, performance, charts...",disabled:w,className:"flex-1 border-amber-200 dark:border-turquoise/30 focus:border-amber-400 dark:focus:border-turquoise focus:ring-amber-200 dark:focus:ring-turquoise/20 dark:bg-slate-800/50 dark:text-gray-200"}),(0,t.jsx)(c.$,{onClick:B,disabled:!n.trim()||w,size:"icon",className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 dark:from-turquoise/80 dark:to-cyan/80 dark:hover:from-turquoise dark:hover:to-cyan border-0 shadow-lg dark:glow-cyan dark:text-slate-900",children:w?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"h-4 w-4"})})]}),l.length>1&&(0,t.jsx)("div",{className:"flex justify-center mt-2",children:(0,t.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>{i([]),q(null),A&&i([{id:"welcome-new",content:"The sacred scrolls are cleared! ☀️ I am Ra, ready to bestow my divine guidance upon your LeadFlow analytics journey once more. What insights do you seek, ".concat(A.displayName||"devoted one","?"),isBot:!0,timestamp:new Date}])},className:"text-xs text-amber-600 dark:text-turquoise/80 hover:text-amber-800 dark:hover:text-turquoise hover:bg-amber-100 dark:hover:bg-turquoise/10",children:"Clear Sacred Scrolls"})})]})]})]})})}function y(){let[e,a]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics AI Assistant"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Powered by Ra - Your divine guide to sales insights"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"h-6 w-6 text-amber-600 dark:text-turquoise animate-pulse"}),(0,t.jsx)(d.A,{className:"h-4 w-4 text-amber-700 dark:text-cyan"})]})]}),(0,t.jsxs)(l.Zp,{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-slate-900 dark:to-slate-800 border-2 border-amber-200 dark:border-turquoise/30 dark:card-glass dark:glow-turquoise",children:[(0,t.jsxs)(l.aR,{className:"text-center",children:[(0,t.jsx)("div",{className:"flex justify-center mb-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-amber-200 to-orange-300 dark:from-turquoise/20 dark:to-cyan/30 flex items-center justify-center border-4 border-amber-300 dark:border-turquoise/50 shadow-lg dark:glow-turquoise",children:(0,t.jsx)(o.A,{className:"h-10 w-10 text-amber-700 dark:text-turquoise"})}),(0,t.jsx)(d.A,{className:"h-6 w-6 text-amber-700 dark:text-cyan absolute -top-2 -right-2"})]})}),(0,t.jsx)(l.ZB,{className:"text-2xl text-amber-900 dark:text-turquoise",children:"Ra - Sun God of LeadFlow"}),(0,t.jsx)("p",{className:"text-amber-700 dark:text-gray-300",children:"Your divine analytics assistant, ready to illuminate sales insights with cosmic wisdom"})]}),(0,t.jsxs)(l.Wu,{className:"text-center space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"p-4 bg-white/20 dark:bg-slate-800/30 rounded-lg",children:[(0,t.jsx)(i.A,{className:"h-8 w-8 text-amber-600 dark:text-turquoise mx-auto mb-2"}),(0,t.jsx)("h3",{className:"font-semibold text-amber-800 dark:text-turquoise",children:"Smart Analytics"}),(0,t.jsx)("p",{className:"text-amber-600 dark:text-gray-400",children:"AI-powered insights from your sales data"})]}),(0,t.jsxs)("div",{className:"p-4 bg-white/20 dark:bg-slate-800/30 rounded-lg",children:[(0,t.jsx)(n.A,{className:"h-8 w-8 text-amber-600 dark:text-turquoise mx-auto mb-2"}),(0,t.jsx)("h3",{className:"font-semibold text-amber-800 dark:text-turquoise",children:"Data Visualization"}),(0,t.jsx)("p",{className:"text-amber-600 dark:text-gray-400",children:"Dynamic charts and graphs on demand"})]}),(0,t.jsxs)("div",{className:"p-4 bg-white/20 dark:bg-slate-800/30 rounded-lg",children:[(0,t.jsx)(o.A,{className:"h-8 w-8 text-amber-600 dark:text-turquoise mx-auto mb-2"}),(0,t.jsx)("h3",{className:"font-semibold text-amber-800 dark:text-turquoise",children:"Divine Guidance"}),(0,t.jsx)("p",{className:"text-amber-600 dark:text-gray-400",children:"Strategic recommendations from Ra"})]})]}),(0,t.jsxs)(c.$,{onClick:()=>a(!0),className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 dark:from-turquoise/80 dark:to-cyan/80 dark:hover:from-turquoise dark:hover:to-cyan text-white dark:text-slate-900 px-8 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200 dark:glow-cyan",children:[(0,t.jsx)(o.A,{className:"mr-2 h-5 w-5"}),"Consult with Ra"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(i.A,{className:"h-5 w-5 text-amber-600 dark:text-turquoise"}),"What Ra Can Help With"]})}),(0,t.jsx)(l.Wu,{className:"space-y-2",children:(0,t.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-2 w-2 bg-amber-500 rounded-full"}),"Top performer analysis and rankings"]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-2 w-2 bg-amber-500 rounded-full"}),"Revenue and system size breakdowns"]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-2 w-2 bg-amber-500 rounded-full"}),"Team performance comparisons"]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-2 w-2 bg-amber-500 rounded-full"}),"Custom charts and visualizations"]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-2 w-2 bg-amber-500 rounded-full"}),"Strategic sales insights"]})]})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(n.A,{className:"h-5 w-5 text-amber-600 dark:text-turquoise"}),"Example Questions"]})}),(0,t.jsx)(l.Wu,{className:"space-y-2",children:(0,t.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,t.jsx)("li",{className:"italic text-muted-foreground",children:'"Show me the top 5 closers by revenue"'}),(0,t.jsx)("li",{className:"italic text-muted-foreground",children:'"Create a chart of system sizes by team"'}),(0,t.jsx)("li",{className:"italic text-muted-foreground",children:'"How is Richard performing this month?"'}),(0,t.jsx)("li",{className:"italic text-muted-foreground",children:'"Compare Dynasty Vendetta vs TakeoverPros"'}),(0,t.jsx)("li",{className:"italic text-muted-foreground",children:'"What\'s our average deal size?"'})]})})]})]}),(0,t.jsx)(w,{isOpen:e,onClose:()=>a(!1)})]})}},62523:(e,a,r)=>{"use strict";r.d(a,{p:()=>o});var t=r(95155),s=r(12115),l=r(59434);let o=s.forwardRef((e,a)=>{let{className:r,type:s,...o}=e;return(0,t.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:a,...o})});o.displayName="Input"},66424:(e,a,r)=>{"use strict";r.d(a,{F:()=>d});var t=r(95155),s=r(12115),l=r(47655),o=r(59434);let d=s.forwardRef((e,a)=>{let{className:r,children:s,...d}=e;return(0,t.jsxs)(l.bL,{ref:a,className:(0,o.cn)("relative overflow-hidden",r),...d,children:[(0,t.jsx)(l.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,t.jsx)(i,{}),(0,t.jsx)(l.OK,{})]})});d.displayName=l.bL.displayName;let i=s.forwardRef((e,a)=>{let{className:r,orientation:s="vertical",...d}=e;return(0,t.jsx)(l.VM,{ref:a,orientation:s,className:(0,o.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...d,children:(0,t.jsx)(l.lr,{className:"relative flex-1 rounded-full bg-border"})})});i.displayName=l.VM.displayName},66695:(e,a,r)=>{"use strict";r.d(a,{BT:()=>n,Wu:()=>c,ZB:()=>i,Zp:()=>o,aR:()=>d,wL:()=>m});var t=r(95155),s=r(12115),l=r(59434);let o=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,"data-card":"true",className:(0,l.cn)("rounded-2xl overflow-hidden border border-slate-200 bg-white text-card-foreground","shadow-lg shadow-slate-200/50 hover:shadow-xl hover:shadow-slate-300/50","transition-all duration-200 ease-in-out","mobile:rounded-xl mobile:mx-2 mobile:shadow-md","mobile:border-slate-300/50",r),...s})});o.displayName="Card";let d=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6","mobile:p-4 mobile:space-y-1",r),...s})});d.displayName="CardHeader";let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("h3",{ref:a,className:(0,l.cn)("text-3xl font-bold font-headline leading-tight tracking-tight text-center","mobile:text-xl mobile:leading-snug","tablet:text-2xl",r),...s})});i.displayName="CardTitle";let n=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground text-center","mobile:text-xs mobile:leading-relaxed",r),...s})});n.displayName="CardDescription";let c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let m=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",r),...s})});m.displayName="CardFooter"},85450:(e,a,r)=>{Promise.resolve().then(r.bind(r,9991))}},e=>{var a=a=>e(e.s=a);e.O(0,[2992,3644,4763,4277,5296,9233,8104,6521,8622,8441,1684,7358],()=>a(85450)),_N_E=e.O()}]);