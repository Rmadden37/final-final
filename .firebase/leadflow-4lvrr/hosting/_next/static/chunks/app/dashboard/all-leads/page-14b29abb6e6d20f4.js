(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7763],{14401:(e,a,s)=>{Promise.resolve().then(s.bind(s,59445))},59445:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>p});var r=s(95155),t=s(12115),l=s(98030),d=s(87481),i=s(56104),c=s(35317),m=s(22715),n=s(66695),h=s(50172);let o=(0,s(40157).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var x=s(66424),u=s(35695);function p(){let{user:e,loading:a}=(0,l.A)(),{toast:s}=(0,d.dj)(),p=(0,u.useRouter)(),[f,g]=(0,t.useState)([]),[v,j]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{if(!a&&(!e||"manager"!==e.role&&"admin"!==e.role))return void p.replace(e?"/dashboard":"/login");if(e&&e.teamId&&("manager"===e.role||"admin"===e.role)){j(!0);let a=(0,c.query)((0,c.collection)(i.db,"leads"),(0,c.where)("teamId","==",e.teamId),(0,c.My)("createdAt","desc"),(0,c.AB)(40)),r=(0,c.aQ)(a,e=>{g(e.docs.map(e=>({id:e.id,...e.data()}))),j(!1)},e=>{s({title:"Error",description:"Failed to load leads. Please refresh the page.",variant:"destructive"}),j(!1)});return()=>r()}},[e,a,p,s]),a||v)?(0,r.jsx)("div",{className:"flex min-h-[calc(100vh-var(--header-height,4rem))] items-center justify-center",children:(0,r.jsx)(h.A,{className:"h-12 w-12 animate-spin text-primary"})}):(null==e?void 0:e.role)!=="manager"?(0,r.jsx)("div",{className:"flex min-h-[calc(100vh-var(--header-height,4rem))] items-center justify-center",children:(0,r.jsx)("p",{className:"text-destructive",children:"Access Denied. You must be a manager to view this page."})}):(0,r.jsx)("div",{className:"container mx-auto py-8",children:(0,r.jsxs)(n.Zp,{className:"shadow-xl",children:[(0,r.jsx)(n.aR,{className:"px-4 sm:px-6",children:(0,r.jsxs)(n.ZB,{className:"text-2xl sm:text-3xl font-bold font-headline flex items-center justify-center",children:[(0,r.jsx)(o,{className:"mr-2 sm:mr-3 h-6 w-6 sm:h-8 sm:w-8 text-primary"}),"All Submitted Leads"]})}),(0,r.jsx)(n.Wu,{className:"px-4 sm:px-6",children:0!==f.length||v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.F,{className:"h-[calc(100vh-20rem)] sm:h-[calc(100vh-18rem)] md:h-[calc(100vh-16rem)] lg:h-[calc(100vh-14rem)] pr-3 sm:pr-4",children:[" ",(0,r.jsx)("div",{className:"grid grid-cols-1 gap-3 sm:gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:f.map(e=>(0,r.jsx)(m.A,{lead:e,context:"all-leads"},e.id))})]}),f.length>=40&&(0,r.jsx)("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:'Consider implementing pagination or a "load more" feature for older leads.'})]}):(0,r.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No leads found for your team."})})})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[2992,3644,4763,4277,5296,9233,9196,4547,1859,8104,3450,7954,2502,3849,618,8622,5341,5146,8441,1684,7358],()=>a(14401)),_N_E=e.O()}]);