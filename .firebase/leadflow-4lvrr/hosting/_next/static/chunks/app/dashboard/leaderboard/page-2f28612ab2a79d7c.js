(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5601],{17313:(e,a,t)=>{"use strict";t.d(a,{Xi:()=>i,av:()=>c,j7:()=>n,tU:()=>o});var r=t(95155),s=t(12115),l=t(60704),d=t(59434);let o=l.bL,n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.B8,{ref:a,className:(0,d.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s})});n.displayName=l.B8.displayName;let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.l9,{ref:a,className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s})});i.displayName=l.l9.displayName;let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.UC,{ref:a,className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s})});c.displayName=l.UC.displayName},26126:(e,a,t)=>{"use strict";t.d(a,{E:()=>o});var r=t(95155);t(12115);var s=t(74466),l=t(59434);let d=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:a,variant:t,...s}=e;return(0,r.jsx)("div",{className:(0,l.cn)(d({variant:t}),a),...s})}},30285:(e,a,t)=>{"use strict";t.d(a,{$:()=>i,r:()=>n});var r=t(95155),s=t(12115),l=t(99708),d=t(74466),o=t(59434);let n=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 touch-manipulation select-none",{variants:{variant:{default:"text-primary-foreground bg-gradient-to-r from-[hsl(var(--primary-gradient-from))] to-[hsl(var(--primary-gradient-to))] hover:from-[hsl(var(--primary-gradient-to))] hover:to-[hsl(var(--primary-gradient-from))] shadow-md hover:shadow-lg active:scale-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-md hover:shadow-lg active:scale-95",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground shadow-sm hover:shadow-md active:scale-95",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm hover:shadow-md active:scale-95",ghost:"hover:bg-accent hover:text-accent-foreground active:scale-95",link:"text-primary underline-offset-4 hover:underline","primary-solid":"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg active:scale-95"},size:{default:"h-10 px-4 py-2 min-h-touch mobile:h-12 mobile:px-6 mobile:text-base",sm:"h-9 rounded-md px-3 min-h-touch mobile:h-10 mobile:px-4",lg:"h-11 rounded-md px-8 min-h-touch mobile:h-14 mobile:px-10 mobile:text-lg",icon:"h-10 w-10 min-h-touch min-w-touch mobile:h-12 mobile:w-12"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,a)=>{let{className:t,variant:s,size:d,asChild:i=!1,...c}=e,m=i?l.DX:"button";return(0,r.jsx)(m,{className:(0,o.cn)(n({variant:s,size:d,className:t})),ref:a,...c})});i.displayName="Button"},44838:(e,a,t)=>{"use strict";t.d(a,{SQ:()=>u,_2:()=>p,mB:()=>h,rI:()=>c,ty:()=>m});var r=t(95155),s=t(12115),l=t(48698),d=t(73158),o=t(10518),n=t(70154),i=t(59434);let c=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,s.forwardRef((e,a)=>{let{className:t,inset:s,children:o,...n}=e;return(0,r.jsxs)(l.ZP,{ref:a,className:(0,i.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...n,children:[o,(0,r.jsx)(d.A,{className:"ml-auto"})]})}).displayName=l.ZP.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.G5,{ref:a,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}).displayName=l.G5.displayName;let u=s.forwardRef((e,a)=>{let{className:t,sideOffset:s=4,...d}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsx)(l.UC,{ref:a,sideOffset:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...d})})});u.displayName=l.UC.displayName;let p=s.forwardRef((e,a)=>{let{className:t,inset:s,...d}=e;return(0,r.jsx)(l.q7,{ref:a,className:(0,i.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...d})});p.displayName=l.q7.displayName,s.forwardRef((e,a)=>{let{className:t,children:s,checked:d,...n}=e;return(0,r.jsxs)(l.H_,{ref:a,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:d,...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})}),s]})}).displayName=l.H_.displayName,s.forwardRef((e,a)=>{let{className:t,children:s,...d}=e;return(0,r.jsxs)(l.hN,{ref:a,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...d,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(n.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=l.hN.displayName,s.forwardRef((e,a)=>{let{className:t,inset:s,...d}=e;return(0,r.jsx)(l.JU,{ref:a,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...d})}).displayName=l.JU.displayName;let h=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.wv,{ref:a,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...s})});h.displayName=l.wv.displayName},51927:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>w});var r=t(95155);t(57671);var s=t(12115),l=t(66695),d=t(26126),o=t(30285),n=t(17313),i=t(91394),c=t(44838),m=t(85268),u=t(47105),p=t(67554),h=t(51920),f=t(79556),g=t(50286),x=t(81203),b=t(80659),v=t(98030);let N=e=>{let{rank:a}=e;return 1===a?(0,r.jsxs)(d.E,{className:"rank-badge gold",children:[(0,r.jsx)(m.A,{className:"rank-icon gold"}),(0,r.jsx)("span",{children:"1st"})]}):2===a?(0,r.jsxs)(d.E,{className:"rank-badge silver",children:[(0,r.jsx)(u.A,{className:"rank-icon silver"}),(0,r.jsx)("span",{children:"2nd"})]}):3===a?(0,r.jsxs)(d.E,{className:"rank-badge bronze",children:[(0,r.jsx)(u.A,{className:"rank-icon bronze"}),(0,r.jsx)("span",{children:"3rd"})]}):(0,r.jsxs)(d.E,{variant:"outline",className:"rank-badge other",children:["#",a]})};function w(){var e;let{user:a}=(0,v.A)();(null==a?void 0:a.role)==="manager"||null==a||a.role;let[t,d]=(0,s.useState)([]),[m,u]=(0,s.useState)([]),[w,j]=(0,s.useState)([]),[y,k]=(0,s.useState)(!0),[D,R]=(0,s.useState)(null),[C,L]=(0,s.useState)([]),[W,S]=(0,s.useState)("ytd"),A=new Date,U=new Date(A);U.setDate(A.getDate()-1);let T=new Date(A.getFullYear()-(9>A.getMonth()),9,1),_=new Date(A.getFullYear(),A.getMonth(),1),z=new Date(A);z.setDate(A.getDate()-A.getDay());let I=new Date(z);I.setDate(z.getDate()-7);let E=[{label:"Today",value:"today",start:new Date(A.getFullYear(),A.getMonth(),A.getDate())},{label:"Yesterday",value:"yesterday",start:U,end:U},{label:"LW (Last Week)",value:"lw",start:I,end:new Date(z.getTime()-1)},{label:"WTD",value:"wtd",start:z},{label:"MTD",value:"mtd",start:_},{label:"YTD",value:"ytd",start:T}];(0,s.useEffect)(()=>{!async function(){try{console.log("\uD83D\uDD04 Fetching users from simple-users API...");let e=await fetch("/api/simple-users"),a=await e.json();console.log("✅ Users fetched:",a.users),L(a.users||[])}catch(e){console.error("❌ Error fetching users:",e),L([])}}()},[]);let F=(0,s.useMemo)(()=>E,[]),K=(0,s.useCallback)(e=>{if(!e||!C.length)return;let a=e.trim();console.log('\uD83D\uDD0D Trying to match: "'.concat(a,'"')),console.log("\uD83D\uDCCB Available users:",C.map(e=>e.displayName));let t=C.find(e=>{var t;return(null==(t=e.displayName)?void 0:t.trim().toLowerCase())===a.toLowerCase()});if(t)return console.log('✅ Exact match found: "'.concat(a,'" -> "').concat(t.displayName,'" with photo: ').concat(t.photoURL)),t;let r=a.split(" ").filter(e=>e.length>1);if(r.length>=2){let e=r[0],s=r[r.length-1];if(t=C.find(a=>{if(!a.displayName)return!1;let t=a.displayName.trim().split(" ").filter(e=>e.length>1);return!(t.length<2)&&e.toLowerCase()===t[0].toLowerCase()&&s.toLowerCase()===t[t.length-1].toLowerCase()}))return console.log('✅ Fuzzy match found: "'.concat(a,'" -> "').concat(t.displayName,'" with photo: ').concat(t.photoURL)),t}console.log('❌ No match found for: "'.concat(a,'"'))},[C]),P=(0,s.useCallback)(e=>{let a=F.find(e=>e.value===W);if(!a)return!0;if(!e||""===e.trim())return!1;let t=null,r=e.trim();try{if(r.includes("/")){let e=r.split("/");if(3===e.length){let[a,r,s]=e;t=new Date(parseInt(s),parseInt(a)-1,parseInt(r))}}else if(r.includes("-")&&r.length>=8)t=new Date(r);else if(r.includes("-")){let e=r.split("-");if(3===e.length){let[a,r,s]=e;t=new Date(parseInt(s),parseInt(a)-1,parseInt(r))}}else t=new Date(r);if(!t||isNaN(t.getTime()))return console.warn("❌ Could not parse date:",r),!1;if(a.end)return t>=a.start&&t<=a.end;return t>=a.start}catch(e){return console.error("❌ Date parsing error for:",r,e),!1}},[W,F]),B=(0,s.useCallback)(async()=>{try{k(!0),R(null);let e=await fetch("/api/leaderboard-data");if(!e.ok)throw Error("Failed to fetch data");let{data:a}=await e.json(),t=new Map,r=new Map,s=new Map;a.forEach(e=>{var a,l;let d=null==(a=e.closer_name)?void 0:a.trim(),o=null==(l=e.setter_name)?void 0:l.trim(),n="1"===e.realization,i=parseFloat(e.kw||"0");parseFloat(e.net_ppw||"0");let c=e.date_submitted;if(!c||P(c)){if(d&&n){if(!t.has(d)){let e=K(d);t.set(d,{name:d,sales:0,revenue:0,totalKW:0,avgDealSize:0,matchedProfile:e?{displayName:e.displayName,photoURL:e.photoURL,email:e.displayName+"@company.com"}:void 0})}let e=t.get(d);e.sales+=1,e.totalKW+=i}if(o){if(!r.has(o)){let e=K(o);r.set(o,{name:o,totalLeads:0,grossKW:0,matchedProfile:e?{displayName:e.displayName,photoURL:e.photoURL,email:e.displayName+"@company.com"}:void 0})}let e=r.get(o);e.totalLeads+=1,e.grossKW+=i}if(o&&d&&o===d&&n){if(!s.has(o)){let e=K(o);s.set(o,{name:o,sales:0,revenue:0,totalKW:0,avgDealSize:0,matchedProfile:e?{displayName:e.displayName,photoURL:e.photoURL,email:e.displayName+"@company.com"}:void 0})}let e=s.get(o);e.sales+=1,e.totalKW+=i}}});let l=Array.from(t.values()).sort((e,a)=>a.totalKW-e.totalKW),o=Array.from(r.values()).sort((e,a)=>a.grossKW-e.grossKW),n=Array.from(s.values()).sort((e,a)=>a.totalKW-e.totalKW);d(l),u(o),j(n)}catch(e){R(e instanceof Error?e.message:"Unknown error")}finally{k(!1)}},[K,P]);(0,s.useEffect)(()=>{B()},[B]);let Z=e=>e.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),[G,Q]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{Q(document.body.classList.contains("premium")||document.documentElement.classList.contains("premium"))},[]),y)return(0,r.jsx)("div",{className:"container mx-auto p-3 sm:p-4 lg:p-6",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-32 sm:h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(p.A,{className:"w-6 h-6 sm:w-8 sm:h-8 animate-spin mx-auto mb-2"}),(0,r.jsx)("span",{className:"text-sm sm:text-base",children:"Loading leaderboard..."})]})})});let q="premium card-glass shadow-premium-purple border-premium-glow bg-premium-glass",M="stat-glow";return(0,r.jsx)("div",{className:"min-h-screen w-full ".concat(G?"premium bg-premium-glass":"bg-[#f8fafc] dark:bg-slate-950"),children:(0,r.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 max-w-5xl",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mt-2 mb-6",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h1",{className:"text-3xl sm:text-4xl font-extrabold mb-1 tracking-tight ".concat(G?"text-glow text-white":"text-gray-900 dark:text-white"),children:"Performance Leaderboard"}),(0,r.jsx)("p",{className:"text-base ".concat(G?"text-muted-foreground":"text-gray-500 dark:text-gray-300"),children:"Track top performers across setters and closers"}),D&&(0,r.jsx)("p",{className:"text-sm text-red-600 mt-1",children:D})]}),(0,r.jsxs)(o.$,{onClick:B,variant:"default",className:"font-semibold shadow-md px-6 py-2 rounded-lg transition-all ".concat(G?"bg-premium-glass border border-premium-glow text-premium-purple hover:bg-premium-glass/80":"bg-blue-600 hover:bg-blue-700 text-white dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-white"),disabled:y,children:[(0,r.jsx)(p.A,{className:"w-5 h-5 ".concat(y?"animate-spin":""," mr-2 ").concat(G?"text-premium-purple":"")}),"Refresh"]})]}),(0,r.jsx)(l.Zp,{className:"mb-6 ".concat(G?q:"bg-white border border-gray-300 shadow-lg dark:bg-slate-900 dark:border-slate-800 dark:shadow-lg"),"data-card":!0,children:(0,r.jsx)(l.Wu,{className:"py-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,r.jsx)(h.A,{className:"h-5 w-5 ".concat(G?"text-premium-purple":"text-gray-400 dark:text-gray-300")}),(0,r.jsx)("span",{className:"text-base font-medium ".concat(G?"text-premium-purple":"text-gray-700 dark:text-white"),children:"Date Range:"})]}),(0,r.jsxs)(c.rI,{children:[(0,r.jsx)(c.ty,{asChild:!0,children:(0,r.jsxs)(o.$,{variant:"outline",className:"min-w-[140px] font-medium shadow-none ".concat(G?"bg-premium-glass border-premium-glow text-premium-purple":"bg-gray-50 border border-gray-200 text-gray-700 hover:bg-gray-100 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:hover:bg-slate-700"),children:[(0,r.jsx)("span",{className:"truncate",children:(null==(e=E.find(e=>e.value===W))?void 0:e.label)||"Select Range"}),(0,r.jsx)(f.A,{className:"ml-2 h-4 w-4 shrink-0"})]})}),(0,r.jsx)(c.SQ,{align:"start",className:"w-[180px]",children:E.map(e=>(0,r.jsx)(c._2,{onClick:()=>S(e.value),className:W===e.value?G?"bg-premium-glass text-premium-purple font-semibold":"bg-blue-50 text-blue-700 font-semibold dark:bg-slate-800 dark:text-blue-400":"",children:e.label},e.value))})]})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[(0,r.jsxs)(l.Zp,{className:"".concat(G?q:"bg-white border border-gray-300 shadow-lg dark:bg-slate-900 dark:border-slate-800 dark:shadow-lg"),"data-card":!0,children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(l.ZB,{className:"text-base font-semibold ".concat(G?"text-premium-purple":"text-gray-700 dark:text-white"),children:"Total Setters"}),(0,r.jsx)(g.A,{className:"h-5 w-5 ".concat(G?"text-premium-teal":"text-gray-400 dark:text-gray-300")})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(G?M:"text-gray-900 dark:text-white"),children:m.length})})]}),(0,r.jsxs)(l.Zp,{className:"".concat(G?q:"bg-white border border-gray-300 shadow-lg dark:bg-slate-900 dark:border-slate-800 dark:shadow-lg"),"data-card":!0,children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(l.ZB,{className:"text-base font-semibold ".concat(G?"text-premium-purple":"text-gray-700 dark:text-white"),children:"Total Closers"}),(0,r.jsx)(x.A,{className:"h-5 w-5 ".concat(G?"text-premium-teal":"text-gray-400 dark:text-gray-300")})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(G?M:"text-gray-900 dark:text-white"),children:t.length})})]}),(0,r.jsxs)(l.Zp,{className:"".concat(G?q:"bg-white border border-gray-300 shadow-lg dark:bg-slate-900 dark:border-slate-800 dark:shadow-lg"),"data-card":!0,children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(l.ZB,{className:"text-base font-semibold ".concat(G?"text-premium-purple":"text-gray-700 dark:text-white"),children:"Total kW (Net Deals)"}),(0,r.jsx)(b.A,{className:"h-5 w-5 ".concat(G?"text-premium-teal":"text-gray-400 dark:text-gray-300")})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("div",{className:"text-2xl font-bold ".concat(G?M:"text-gray-900 dark:text-white"),children:[Z(t.reduce((e,a)=>e+a.totalKW,0))," kW"]})})]})]}),(0,r.jsxs)(n.tU,{defaultValue:"closers",className:"w-full",children:[(0,r.jsxs)(n.j7,{className:"grid w-full grid-cols-3 h-auto rounded-lg mb-4 ".concat(G?"bg-gradient-to-r from-premium-purple/20 to-premium-teal/10 border border-premium-glow glow-premium":"bg-gray-100 dark:bg-slate-800"),children:[(0,r.jsx)(n.Xi,{value:"closers",className:"text-base font-semibold py-2 rounded-lg data-[state=active]:shadow-md data-[state=active]:text-blue-700 dark:data-[state=active]:text-blue-400 ".concat(G?"data-[state=active]:bg-premium-glass data-[state=active]:text-premium-purple":"data-[state=active]:bg-white dark:data-[state=active]:bg-slate-900"),children:"Top Closers"}),(0,r.jsx)(n.Xi,{value:"setters",className:"text-base font-semibold py-2 rounded-lg data-[state=active]:shadow-md data-[state=active]:text-blue-700 dark:data-[state=active]:text-blue-400 ".concat(G?"data-[state=active]:bg-premium-glass data-[state=active]:text-premium-purple":"data-[state=active]:bg-white dark:data-[state=active]:bg-slate-900"),children:"Top Setters"}),(0,r.jsx)(n.Xi,{value:"selfgen",className:"text-base font-semibold py-2 rounded-lg data-[state=active]:shadow-md data-[state=active]:text-blue-700 dark:data-[state=active]:text-blue-400 ".concat(G?"data-[state=active]:bg-premium-glass data-[state=active]:text-premium-purple":"data-[state=active]:bg-white dark:data-[state=active]:bg-slate-900"),children:"Top Self-Gen"})]}),(0,r.jsx)(n.av,{value:"closers",className:"leaderboard-container",children:(0,r.jsxs)(l.Zp,{className:"".concat(G?q:"bg-white border border-gray-300 shadow-xl dark:bg-slate-900 dark:border-slate-800 dark:shadow-lg"),"data-card":!0,children:[(0,r.jsx)(l.aR,{className:"leaderboard-card-header",children:(0,r.jsx)(l.ZB,{className:"leaderboard-card-title ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"Top Closers"})}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("div",{className:"leaderboard-container",children:[t.slice(0,10).map((e,a)=>{var t,s;let l=(null==(t=e.matchedProfile)?void 0:t.displayName)||e.name,d=null==(s=e.matchedProfile)?void 0:s.photoURL,o=0===a;return(0,r.jsx)("div",{className:"leaderboard-card ".concat(o?"rank-1":"rank-other"," ").concat(G?"premium":"default"," ").concat(G?"":"dark"),style:o?{zIndex:2}:{},children:(0,r.jsxs)("div",{className:"leaderboard-content",children:[(0,r.jsxs)("div",{className:"leaderboard-left-section",children:[(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)(N,{rank:a+1})}),(0,r.jsxs)(i.eu,{className:"leaderboard-avatar ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:[(0,r.jsx)(i.BK,{src:d||void 0,alt:l,className:"leaderboard-avatar-image"}),(0,r.jsx)(i.q5,{className:"leaderboard-avatar-fallback ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:l.slice(0,2).toUpperCase()})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"leaderboard-name ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:l}),(0,r.jsxs)("div",{className:"leaderboard-metric-container",children:[(0,r.jsx)("p",{className:"leaderboard-metric-label ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"Net Deals:"}),(0,r.jsx)("p",{className:"leaderboard-metric-value ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:e.sales})]})]})]}),(0,r.jsxs)("div",{className:"leaderboard-right-section",children:[(0,r.jsx)("p",{className:"leaderboard-kw-label ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"Total kW"}),(0,r.jsx)("p",{className:"leaderboard-kw-value ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:Z(e.totalKW)}),(0,r.jsx)("p",{className:"leaderboard-kw-unit ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"kW"})]})]})},e.name)}),0===t.length&&(0,r.jsx)("div",{className:"leaderboard-empty ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"No closer data available for the selected date range."})]})})]})}),(0,r.jsx)(n.av,{value:"setters",className:"leaderboard-container",children:(0,r.jsxs)(l.Zp,{className:"".concat(G?q:"bg-white border border-gray-300 shadow-xl dark:bg-slate-900 dark:border-slate-800 dark:shadow-lg"),"data-card":!0,children:[(0,r.jsx)(l.aR,{className:"leaderboard-card-header",children:(0,r.jsx)(l.ZB,{className:"leaderboard-card-title ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"Top Setters"})}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("div",{className:"leaderboard-container",children:[m.slice(0,10).map((e,a)=>{var t,s;let l=(null==(t=e.matchedProfile)?void 0:t.displayName)||e.name,d=null==(s=e.matchedProfile)?void 0:s.photoURL,o=0===a;return(0,r.jsx)("div",{className:"leaderboard-card ".concat(o?"rank-1":"rank-other"," ").concat(G?"premium":"default"," ").concat(G?"":"dark"),style:o?{zIndex:2}:{},children:(0,r.jsxs)("div",{className:"leaderboard-content",children:[(0,r.jsxs)("div",{className:"leaderboard-left-section",children:[(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)(N,{rank:a+1})}),(0,r.jsxs)(i.eu,{className:"leaderboard-avatar ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:[(0,r.jsx)(i.BK,{src:d||void 0,alt:l,className:"leaderboard-avatar-image"}),(0,r.jsx)(i.q5,{className:"leaderboard-avatar-fallback ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:l.slice(0,2).toUpperCase()})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"leaderboard-name ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:l}),(0,r.jsxs)("div",{className:"leaderboard-metric-container",children:[(0,r.jsx)("p",{className:"leaderboard-metric-label ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"Gross Deals:"}),(0,r.jsx)("p",{className:"leaderboard-metric-value ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:e.totalLeads})]})]})]}),(0,r.jsxs)("div",{className:"leaderboard-right-section",children:[(0,r.jsx)("p",{className:"leaderboard-kw-label ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"Gross kW"}),(0,r.jsx)("p",{className:"leaderboard-kw-value ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:Z(e.grossKW)}),(0,r.jsx)("p",{className:"leaderboard-kw-unit ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"kW"})]})]})},e.name)}),0===m.length&&(0,r.jsx)("div",{className:"leaderboard-empty ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"No setter data available for the selected date range."})]})})]})}),(0,r.jsx)(n.av,{value:"selfgen",className:"leaderboard-container",children:(0,r.jsxs)(l.Zp,{className:"".concat(G?q:"bg-white border border-gray-300 shadow-xl dark:bg-slate-900 dark:border-slate-800 dark:shadow-lg"),"data-card":!0,children:[(0,r.jsx)(l.aR,{className:"leaderboard-card-header",children:(0,r.jsx)(l.ZB,{className:"leaderboard-card-title ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"Top Self-Gen"})}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("div",{className:"leaderboard-container",children:[w.slice(0,10).map((e,a)=>{var t,s;let l=(null==(t=e.matchedProfile)?void 0:t.displayName)||e.name,d=null==(s=e.matchedProfile)?void 0:s.photoURL,o=0===a;return(0,r.jsx)("div",{className:"leaderboard-card ".concat(o?"rank-1":"rank-other"," ").concat(G?"premium":"default"," ").concat(G?"":"dark"),style:o?{zIndex:2}:{},children:(0,r.jsxs)("div",{className:"leaderboard-content",children:[(0,r.jsxs)("div",{className:"leaderboard-left-section",children:[(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)(N,{rank:a+1})}),(0,r.jsxs)(i.eu,{className:"leaderboard-avatar ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:[(0,r.jsx)(i.BK,{src:d||void 0,alt:l,className:"leaderboard-avatar-image"}),(0,r.jsx)(i.q5,{className:"leaderboard-avatar-fallback ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:l.slice(0,2).toUpperCase()})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"leaderboard-name ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:l}),(0,r.jsxs)("div",{className:"leaderboard-metric-container",children:[(0,r.jsx)("p",{className:"leaderboard-metric-label ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"Net Self-Gen Deals:"}),(0,r.jsx)("p",{className:"leaderboard-metric-value ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:e.sales})]})]})]}),(0,r.jsxs)("div",{className:"leaderboard-right-section",children:[(0,r.jsx)("p",{className:"leaderboard-kw-label ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"Total kW"}),(0,r.jsx)("p",{className:"leaderboard-kw-value ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:Z(e.totalKW)}),(0,r.jsx)("p",{className:"leaderboard-kw-unit ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"kW"})]})]})},e.name)}),0===w.length&&(0,r.jsx)("div",{className:"leaderboard-empty ".concat(G?"premium":"default"," ").concat(G?"":"dark"),children:"No self-gen data available for the selected date range."})]})})]})})]})]})})}},56104:(e,a,t)=>{"use strict";t.d(a,{EF:()=>p,IG:()=>m,V$:()=>h,db:()=>c,j2:()=>i,yA:()=>n});var r=t(23915),s=t(93004),l=t(35317),d=t(90858),o=t(81427);let n=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyBc3jmFE6dRXBApmWD9Jg2PO86suqGgaZw",authDomain:"leadflow-4lvrr.firebaseapp.com",projectId:"leadflow-4lvrr",storageBucket:"leadflow-4lvrr.firebasestorage.app",messagingSenderId:"13877630896",appId:"1:13877630896:web:ab7d2717024960ec36e875",measurementId:"G-KDEF2C21SH"}),i=(0,s.xI)(n),c=(0,l.aU)(n),m=(0,d.c7)(n),u=(0,o.Uz)(n),p=(0,o.Qg)(u,"acceptJob"),h=(0,o.Qg)(u,"inviteUser");(0,o.Qg)(u,"updateAdminRoles"),(0,o.Qg)(u,"getTeamStats"),(0,o.Qg)(u,"getDetailedAnalytics"),(0,o.Qg)(u,"generateAnalyticsReport")},57671:()=>{},59434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>l});var r=t(52596),s=t(39688);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}},66695:(e,a,t)=>{"use strict";t.d(a,{BT:()=>i,Wu:()=>c,ZB:()=>n,Zp:()=>d,aR:()=>o,wL:()=>m});var r=t(95155),s=t(12115),l=t(59434);let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,"data-card":"true",className:(0,l.cn)("rounded-2xl overflow-hidden border border-slate-200 bg-white text-card-foreground","shadow-lg shadow-slate-200/50 hover:shadow-xl hover:shadow-slate-300/50","transition-all duration-200 ease-in-out","mobile:rounded-xl mobile:mx-2 mobile:shadow-md","mobile:border-slate-300/50",t),...s})});d.displayName="Card";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6","mobile:p-4 mobile:space-y-1",t),...s})});o.displayName="CardHeader";let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("h3",{ref:a,className:(0,l.cn)("text-3xl font-bold font-headline leading-tight tracking-tight text-center","mobile:text-xl mobile:leading-snug","tablet:text-2xl",t),...s})});n.displayName="CardTitle";let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground text-center","mobile:text-xs mobile:leading-relaxed",t),...s})});i.displayName="CardDescription";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent";let m=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",t),...s})});m.displayName="CardFooter"},71743:(e,a,t)=>{Promise.resolve().then(t.bind(t,51927))},91394:(e,a,t)=>{"use strict";t.d(a,{BK:()=>n,eu:()=>o,q5:()=>i});var r=t(95155),s=t(12115),l=t(54011),d=t(59434);let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.bL,{ref:a,className:(0,d.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s})});o.displayName=l.bL.displayName;let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l._V,{ref:a,className:(0,d.cn)("aspect-square h-full w-full",t),...s})});n.displayName=l._V.displayName;let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.H4,{ref:a,className:(0,d.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s})});i.displayName=l.H4.displayName},98030:(e,a,t)=>{"use strict";t.d(a,{A:()=>u,AuthProvider:()=>m});var r=t(95155),s=t(93004),l=t(35317),d=t(35695),o=t(12115),n=t(56104),i=t(50172);let c=(0,o.createContext)(void 0),m=e=>{let{children:a}=e,[t,m]=(0,o.useState)(null),[u,p]=(0,o.useState)(null),[h,f]=(0,o.useState)(!0),[g,x]=(0,o.useState)(!1),b=(0,d.useRouter)(),v=(0,d.usePathname)(),N=(0,o.useRef)({isNavigating:!1});(0,o.useEffect)(()=>{console.log("\uD83D\uDD25 Setting up Firebase auth listener");let e=(0,s.hg)(n.j2,async e=>{if(console.log("\uD83D\uDD25 Firebase auth state changed:",!!e,"uid:",null==e?void 0:e.uid),(null==t?void 0:t.uid)===(null==e?void 0:e.uid)&&g)return void console.log("\uD83D\uDD04 Same user, skipping update");m(e),x(!0),!e&&(p(null),f(!1),"/login"===v||N.current.isNavigating||(N.current.isNavigating=!0,console.log("\uD83D\uDEAA Redirecting to login"),b.replace("/login"),setTimeout(()=>{N.current.isNavigating=!1},1e3)))});return()=>{console.log("\uD83D\uDD25 Cleaning up Firebase auth listener"),e()}},[]),(0,o.useEffect)(()=>{let e;if(t&&g){console.log("\uD83D\uDC64 Setting up user document listener for:",t.uid);let a=(0,l.doc)(n.db,"users",t.uid);e=(0,l.aQ)(a,async e=>{if(console.log("\uD83D\uDCC4 User document snapshot received, exists:",e.exists()),e.exists()){let a={uid:t.uid,...e.data()};p(a),f(!1),console.log("✅ User data loaded:",a.email,a.role),"/login"!==v||N.current.isNavigating||(N.current.isNavigating=!0,console.log("\uD83C\uDFE0 Redirecting to dashboard"),b.replace("/dashboard"),setTimeout(()=>{N.current.isNavigating=!1},1e3))}else{console.log("\uD83D\uDCDD Creating default user document");let e={uid:t.uid,email:t.email||"",displayName:t.displayName||"",role:"setter",teamId:"default",avatarUrl:t.photoURL||null,phoneNumber:t.phoneNumber||null,status:"On Duty",createdAt:new Date().toISOString()};try{await (0,l.setDoc)(a,e),p(e),f(!1),console.log("✅ Default user document created")}catch(e){console.error("❌ Failed to create user document:",e),p(null),f(!1)}}},e=>{console.error("❌ User document listener error:",e),p(null),f(!1)})}else!t&&g&&(p(null),f(!1));return()=>{e&&(console.log("\uD83E\uDDF9 Cleaning up user document listener"),e())}},[t,g,v,b]);let w=async()=>{console.log("\uD83D\uDC4B Logging out"),N.current.isNavigating=!0,f(!0);try{await (0,s.CI)(n.j2),p(null),m(null),b.replace("/login")}catch(e){console.error("❌ Logout error:",e)}finally{f(!1),setTimeout(()=>{N.current.isNavigating=!1},1e3)}};if(h&&!g)return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)(i.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})});let j={firebaseUser:t,user:u,loading:h,teamId:(null==u?void 0:u.teamId)||null,role:(null==u?void 0:u.role)||null,logout:w};return(0,r.jsx)(c.Provider,{value:j,children:a})},u=()=>{let e=(0,o.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var a=a=>e(e.s=a);e.O(0,[830,2992,3644,4763,4277,5296,9233,9196,4547,8782,8667,8441,1684,7358],()=>a(71743)),_N_E=e.O()}]);