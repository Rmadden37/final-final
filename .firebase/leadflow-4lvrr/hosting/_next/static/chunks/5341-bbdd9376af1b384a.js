"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5341],{26133:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(95155);a(12115);var o=a(37648),s=a(59434),i=a(59409);let l=(()=>{let e=[];for(let t=8;t<=22;t++){let a=t>12?t-12:t,n=t>=12?"PM":"AM",o=0===a?12:a;e.push({value:"".concat(t.toString().padStart(2,"0"),":00"),label:"".concat(o,":00 ").concat(n)}),t<22&&e.push({value:"".concat(t.toString().padStart(2,"0"),":30"),label:"".concat(o,":30 ").concat(n)})}return e})();function r(e){let{time:t,onTimeChange:a,placeholder:r="Select time",className:d,timeSlots:c=l,disabled:u=!1,error:f=!1}=e,g=c.find(e=>e.value===t);return(0,n.jsxs)(i.l6,{onValueChange:a,value:t,disabled:u,children:[(0,n.jsx)(i.bq,{className:(0,s.cn)("w-full transition-colors",f&&"border-destructive","focus:ring-2 focus:ring-ring focus:ring-offset-2",d),"aria-label":g?"Selected time: ".concat(g.label):r,children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(o.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}),(0,n.jsx)(i.yv,{placeholder:r})]})}),(0,n.jsx)(i.gC,{className:"max-h-[200px]",position:"popper",sideOffset:4,children:c.map(e=>(0,n.jsx)(i.eb,{value:e.value,className:"cursor-pointer",children:e.label},e.value))})]})}},30356:(e,t,a)=>{a.d(t,{C:()=>d,z:()=>r});var n=a(95155),o=a(12115),s=a(54059),i=a(70154),l=a(59434);let r=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,n.jsx)(s.bL,{className:(0,l.cn)("grid gap-2",a),...o,ref:t})});r.displayName=s.bL.displayName;let d=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,n.jsx)(s.q7,{ref:t,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...o,children:(0,n.jsx)(s.C1,{className:"flex items-center justify-center",children:(0,n.jsx)(i.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=s.q7.displayName},53282:(e,t,a)=>{a.d(t,{t0:()=>l});var n=a(35317),o=a(56104);class s{static async setBadgeCount(e){this.badgeCount=Math.max(0,e);try{"setAppBadge"in navigator&&(this.badgeCount>0?await navigator.setAppBadge(this.badgeCount):await navigator.clearAppBadge()),this.updateDocumentTitle(),this.updateFavicon()}catch(e){console.warn("Badge API not supported or failed:",e),this.updateDocumentTitle()}}static async incrementBadge(){await this.setBadgeCount(this.badgeCount+1)}static async decrementBadge(){await this.setBadgeCount(this.badgeCount-1)}static async clearBadge(){await this.setBadgeCount(0)}static getBadgeCount(){return this.badgeCount}static updateDocumentTitle(){let e="LeadFlow";this.badgeCount>0?document.title="(".concat(this.badgeCount,") ").concat(e):document.title=e}static updateFavicon(){try{if("undefined"==typeof document)return;let e=document.querySelector("link[rel*='icon']");if(!e)return;let t=document.createElement("canvas"),a=t.getContext("2d");if(!a)return;t.width=32,t.height=32,a.fillStyle="#3B82F6",a.beginPath(),a.arc(16,16,14,0,2*Math.PI),a.fill(),this.badgeCount>0&&(a.fillStyle="#EF4444",a.beginPath(),a.arc(24,8,6,0,2*Math.PI),a.fill(),a.fillStyle="#FFFFFF",a.font="bold 8px Arial",a.textAlign="center",a.fillText(this.badgeCount>99?"99+":this.badgeCount.toString(),24,11)),e.href=t.toDataURL("image/png")}catch(e){console.warn("Failed to update favicon:",e)}}static initialize(){let e=localStorage.getItem("leadflow-badge-count");if(e){let t=parseInt(e,10);isNaN(t)||this.setBadgeCount(t)}let t=this.setBadgeCount;this.setBadgeCount=async e=>{await t.call(this,e),localStorage.setItem("leadflow-badge-count",e.toString())}}static handleVisibilityChange(){document.addEventListener("visibilitychange",()=>{document.hidden||this.clearBadge()})}}async function i(e,t){try{let a=[];for(let t of e){let e=(0,n.query)((0,n.collection)(o.db,"userTokens"),(0,n.where)("userId","==",t),(0,n.where)("enabled","==",!0));(await (0,n.getDocs)(e)).forEach(e=>{let t=e.data();t.fcmToken&&a.push(t.fcmToken)})}if(0===a.length)return void console.log("No FCM tokens found for users:",e);await s.incrementBadge(),console.log("Would send notification to tokens:",a.length),console.log("Notification:",t)}catch(e){console.error("Error sending push notification:",e)}}s.badgeCount=0;let l={newLead:async(e,t)=>{console.log("newLead notification disabled - only lead assignment notifications allowed")},leadAssigned:async(e,t)=>{await i([t],{title:"\uD83D\uDCCB New Lead Assigned",body:"".concat(e.customerName," has been assigned to you"),tag:"assigned-".concat(e.id),badge:"/icon-192x192.png",data:{type:"lead_assigned",leadId:e.id,actionUrl:"/dashboard/leads/".concat(e.id),badgeCount:1,color:"#EF4444",priority:"high"}})},appointmentReminder:async(e,t,a)=>{console.log("appointmentReminder notification disabled - only lead assignment notifications allowed")},leadUpdated:async(e,t,a)=>{console.log("leadUpdated notification disabled - only lead assignment notifications allowed")},followUpDue:async(e,t)=>{console.log("followUpDue notification disabled - only lead assignment notifications allowed")},closerStatusChange:async(e,t,a)=>{console.log("closerStatusChange notification disabled - only lead assignment notifications allowed")},queueBacklog:async(e,t)=>{console.log("queueBacklog notification disabled - only lead assignment notifications allowed")},dailyGoalReached:async(e,t,a)=>{console.log("dailyGoalReached notification disabled - only lead assignment notifications allowed")},verificationRequired:async(e,t)=>{console.log("verificationRequired notification disabled - only lead assignment notifications allowed")},systemMaintenance:async(e,t)=>{console.log("systemMaintenance notification disabled - only lead assignment notifications allowed")},highPriorityLead:async(e,t)=>{console.log("highPriorityLead notification disabled - only lead assignment notifications allowed")},photoUploaded:async(e,t,a)=>{console.log("photoUploaded notification disabled - only lead assignment notifications allowed")},rotationUpdate:async(e,t)=>{console.log("rotationUpdate notification disabled - only lead assignment notifications allowed")},chatMention:async(e,t,a)=>{console.log("chatMention notification disabled - only lead assignment notifications allowed")},overdueFollowUp:async(e,t,a)=>{console.log("overdueFollowUp notification disabled - only lead assignment notifications allowed")}}},59409:(e,t,a)=>{a.d(t,{bq:()=>f,eb:()=>h,gC:()=>p,l6:()=>c,yv:()=>u});var n=a(95155),o=a(12115),s=a(31992),i=a(79556),l=a(77381),r=a(10518),d=a(59434);let c=s.bL;s.YJ;let u=s.WT,f=o.forwardRef((e,t)=>{let{className:a,children:o,...l}=e;return(0,n.jsxs)(s.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[o,(0,n.jsx)(s.In,{asChild:!0,children:(0,n.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=s.l9.displayName;let g=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,n.jsx)(s.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...o,children:(0,n.jsx)(l.A,{className:"h-4 w-4"})})});g.displayName=s.PP.displayName;let m=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,n.jsx)(s.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...o,children:(0,n.jsx)(i.A,{className:"h-4 w-4"})})});m.displayName=s.wn.displayName;let p=o.forwardRef((e,t)=>{let{className:a,children:o,position:i="popper",...l}=e;return(0,n.jsx)(s.ZL,{children:(0,n.jsxs)(s.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...l,children:[(0,n.jsx)(g,{}),(0,n.jsx)(s.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:o}),(0,n.jsx)(m,{})]})})});p.displayName=s.UC.displayName,o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,n.jsx)(s.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...o})}).displayName=s.JU.displayName;let h=o.forwardRef((e,t)=>{let{className:a,children:o,...i}=e;return(0,n.jsxs)(s.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(s.VF,{children:(0,n.jsx)(r.A,{className:"h-4 w-4"})})}),(0,n.jsx)(s.p4,{children:o})]})});h.displayName=s.q7.displayName,o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,n.jsx)(s.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...o})}).displayName=s.wv.displayName},99297:(e,t,a)=>{a.d(t,{l:()=>m});var n=a(95155),o=a(12115),s=a(83013),i=a(51920),l=a(47650),r=a(59434),d=a(30285),c=a(965),u=a(73158),f=a(25358);function g(e){let{className:t,classNames:a,showOutsideDays:o=!0,...s}=e;return(0,n.jsx)(f.hv,{showOutsideDays:o,className:(0,r.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,r.cn)((0,d.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,r.cn)((0,d.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,n.jsx)(c.A,{className:(0,r.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,n.jsx)(u.A,{className:(0,r.cn)("h-4 w-4",t),...a})}},...s})}function m(e){let{date:t,onDateChange:a,placeholder:c="Pick a date",disabled:u,className:f,minDate:m,maxDate:p,error:h=!1}=e,[y,b]=o.useState(!1),[x,w]=o.useState(!1),v=o.useRef(null);o.useEffect(()=>{w(!0)},[]),o.useEffect(()=>{},[y]);let N=o.useCallback(e=>{let t=new Date;t.setHours(0,0,0,0);let a=e<t;return m&&(a=a||e<m),p&&(a=a||e>p),a},[m,p]);return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)(d.$,{ref:v,variant:"outline",className:(0,r.cn)("w-full justify-start text-left font-normal transition-colors",!t&&"text-muted-foreground",h&&"border-destructive","hover:bg-accent hover:text-accent-foreground","focus:ring-2 focus:ring-ring focus:ring-offset-2",f),"aria-label":t?"Selected date: ".concat((0,s.GP)(t,"PPP")):c,onClick:()=>b(!y),children:[(0,n.jsx)(i.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}),(0,n.jsx)("span",{className:"truncate",children:t?(0,s.GP)(t,"PPP"):c})]}),y&&x&&(0,n.jsxs)(n.Fragment,{children:[(0,l.createPortal)((0,n.jsx)("div",{className:"fixed inset-0 z-[99998]",onClick:()=>b(!1)}),document.body),(0,l.createPortal)((0,n.jsx)("div",{"data-calendar-portal":!0,className:"fixed z-[99999] bg-background border shadow-xl rounded-md p-0 pointer-events-auto",style:{top:v.current?v.current.getBoundingClientRect().bottom+window.scrollY+4:0,left:v.current?v.current.getBoundingClientRect().left+window.scrollX:0},onClick:e=>e.stopPropagation(),children:(0,n.jsx)(g,{mode:"single",selected:t,onSelect:e=>{e&&(a(e),b(!1))},disabled:u||N,initialFocus:!0,className:"rounded-md pointer-events-auto",classNames:{day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground pointer-events-auto",day_today:"bg-accent text-accent-foreground font-semibold pointer-events-auto",day:"pointer-events-auto cursor-pointer",button:"pointer-events-auto"}})}),document.body)]})]})}g.displayName="Calendar"}}]);